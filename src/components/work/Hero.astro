---
import { Image } from "astro:assets";
import hero from "@assets/images/work/hero.jpg";

interface Props {
  titles: {
    title1: string;
    title2: string;
  };
}

const { titles: t } = Astro.props;
---

<section class="relative flex w-full justify-center px-4 md:px-8">
  <div
    id="hero-container"
    class="animate-scaleDown relative flex w-full items-center justify-center overflow-hidden rounded-lg opacity-0 md:w-fit"
  >
    <Image
      id="hero-image"
      src={hero}
      alt="Works"
      priority
      class="h-60 w-full object-cover max-md:max-w-md md:h-104 md:w-184 lg:h-124 lg:w-4xl"
    />
    <div class="absolute inset-0 bg-neutral-950/10"></div>
    <div
      class="absolute top-1/2 z-1 flex w-full -translate-y-1/2 flex-col items-center justify-center"
    >
      <div class="overflow-hidden">
        <h2
          id="title-one"
          style="animation-delay:500ms"
          class="animate-slideUp text-center text-4xl/snug font-medium capitalize opacity-0 md:text-6xl/snug lg:text-8xl/snug"
        >
          {t.title1}
        </h2>
      </div>
      <div class="overflow-hidden">
        <h2
          id="title-two"
          style="animation-delay:650ms"
          class="animate-slideUp z-2 text-5xl leading-tight font-medium uppercase opacity-0 md:text-[7rem] lg:text-[9rem]"
        >
          {t.title2}
        </h2>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("astro:page-load", () => {
    const container = document.getElementById("hero-container");
    const titleOne = document.getElementById("title-one")!;
    const titleTwo = document.getElementById("title-two")!;
    const image = document.getElementById("hero-image") as HTMLImageElement;
    if (!image) return;

    if (!image.complete) {
      container?.classList.remove("animate-scaleDown");
      titleOne.classList.remove("animate-slideUp");
      titleTwo.classList.remove("animate-slideUp");
    }

    image.addEventListener("load", () => {
      container?.classList.add("animate-scaleDown");
      titleOne.classList.add("animate-slideUp");
      titleTwo.classList.add("animate-slideUp");
    });
  });
</script>
